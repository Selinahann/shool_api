(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f9ea44b"],{"103b":function(t,e,s){},"4f23":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"create-paper-page"},[s("header",{staticClass:"header-bar"},[s("h2",{staticClass:"title"},[t._v("创建试卷")]),s("el-steps",{attrs:{active:t.step_index,simple:""}},[s("el-step",{attrs:{title:"基本信息",icon:"el-icon-edit"}}),s("el-step",{attrs:{title:"选择题目",icon:"el-icon-upload"}}),s("el-step",{attrs:{title:"步骤 3",icon:"el-icon-picture"}})],1)],1),s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-position":"top"}},[1===t.step_index?s("div",[s("el-form-item",{attrs:{label:"考试名称"}},[s("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"考试时间"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"课程"}},[s("el-cascader",{attrs:{options:t.outline_options},model:{value:t.form.outline_id,callback:function(e){t.$set(t.form,"outline_id",e)},expression:"form.outline_id"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"班级"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.class_id,callback:function(e){t.$set(t.form,"class_id",e)},expression:"form.class_id"}},t._l(t.classList,(function(t){return s("el-option",{key:t.class_id,attrs:{label:t.class_name,value:t.class_id}})})),1)],1)],1),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"考试类型"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[s("el-option",{attrs:{label:"日考",value:"日考"}}),s("el-option",{attrs:{label:"周考",value:"周考"}}),s("el-option",{attrs:{label:"月考",value:"月考"}})],1)],1)],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.step_index=2}}},[t._v("下一步")])],1)],1):s("div",[t.form.questions.length<1?[s("div",{staticClass:"btn-group"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("a",{attrs:{href:"javascript:;"},on:{click:t.intellect}},[t._v("智能生成")])]),s("el-col",{attrs:{span:12}},[s("a",{attrs:{href:"javascript:;"}},[t._v("手动选题")])])],1)],1)]:[s("h2",[t._v(t._s(t.form.title))]),s("div",{staticClass:"question-list"},t._l(t.form.questions,(function(e,i){return s("div",{key:i},[s("h3",[t._v(t._s(e.name))])])})),0)]],2)])],1)},a=[],o=s("1da1"),n=(s("96cf"),s("d81d"),s("d3b7"),{name:"create-page",props:{question_type_id:String},data:function(){return{step_index:1,outline_options:[],classList:[],form:{title:"",type:"",questions:[],class_id:"",start_time:"",end_time:"",outline_id:"",majors_id:"",subject_id:""}}},computed:{majors:{get:function(){return[this.form.majors_id,this.form.subject_id,this.form.outline_id]},set:function(t){console.log(t),this.form.majors_id=t[0],this.form.subject_id=t[1],this.form.outline_id=t[2]}},optionsAndAnswer:{get:function(){var t=this;return this.form.options.map((function(e,s){return{value:e,isAnswer:-1!==t.form.answer.indexOf(s)}}))},set:function(t){console.log(t);var e=[];this.form.options=t.map((function(t,s){return t.isAnswer&&e.push(s),t.value})),this.form.answer=e}}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.$api.educational.outline.list().then((function(e){t.outline_options=e.data})),this.$api.academic.class.list().then((function(e){t.classList=e.data}))},fetchClassList:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$api.academic.class.list(t);case 2:i=s.sent,e.tableData=i.data;case 4:case"end":return s.stop()}}),s)})))()},onSubmit:function(){var t=this;return new Promise((function(e,s){t.$refs.form.validate((function(i){i?(console.log(t.form),t.$api.educational.question.create(t.form).then((function(){e()})).catch((function(){s()}))):s()}))}))},intellect:function(){var t=this;this.$api.educational.question.random({outline_id:this.form.outline_id[2]}).then((function(e){t.form.questions=e.data}))}}}),r=n,l=(s("d2e0"),s("2877")),c=Object(l["a"])(r,i,a,!1,null,"02cf2db0",null);e["default"]=c.exports},d2e0:function(t,e,s){"use strict";s("103b")}}]);
//# sourceMappingURL=chunk-7f9ea44b.892d5418.js.map