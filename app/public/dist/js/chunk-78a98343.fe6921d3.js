(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a98343"],{"0a51":function(t,e,o){},"112c":function(t,e,o){"use strict";o("3410")},"1f39":function(t,e,o){},3410:function(t,e,o){},"4af8":function(t,e,o){"use strict";o("0a51")},be43:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("super-table",{attrs:{title:"题库列表",filters:t.filters,data:t.tableData,pagination:t.pagination,column:t.column},on:{filter:this.fetchQuestionsList},scopedSlots:t._u([{key:"tools",fn:function(){return[o("el-dropdown",{style:{marginRight:"20px"},on:{command:t.add_question_command}},[o("el-button",{attrs:{type:"primary"}},[t._v("添加题目"),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.questionTypes,(function(e,n){return o("el-dropdown-item",{key:n,attrs:{command:{id:e.question_type_id,text:e.question_type_text}}},[t._v(t._s(e.question_type_text))])})),1)],1),o("el-button",[t._v("批量导入")]),o("el-button",[t._v("批量导出")])]},proxy:!0},{key:"difficulty",fn:function(e){return[o("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:e.row.difficulty,callback:function(o){t.$set(e.row,"difficulty",o)},expression:"scope.row.difficulty"}})]}},{key:"action",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return t.handleClick(e.row)}}},[t._v("统计")]),o("el-button",{attrs:{type:"text",size:"small"}},[t._v("编辑")]),o("el-button",{attrs:{type:"text",size:"small"}},[t._v("删除")])]}}])}),o("el-drawer",{ref:"drawer",staticClass:"drawer",attrs:{title:t.create_title,visible:t.create_drawer_visible,"show-close":!1,size:"90%",direction:"btt"},on:{"update:visible":function(e){t.create_drawer_visible=e}},scopedSlots:t._u([{key:"title",fn:function(){return[o("header",{staticClass:"drawer-header"},[o("h2",[t._v(t._s(t.create_title))]),o("div",{staticClass:"btn-group"},[o("el-button",{attrs:{type:"info"},on:{click:function(e){return t.$refs.drawer.closeDrawer()}}},[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.handlerCreate}},[t._v("保存")])],1)])]},proxy:!0}])},[o("create-drawer",{ref:"createForm",attrs:{question_type_id:t.question_type_id}})],1)],1)},i=[],s=o("5530"),r=o("1da1"),a=(o("96cf"),o("d3b7"),o("3ca3"),o("ddb0"),o("d81d"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",["w06o1o-g8hy1x"===t.question_type_id?[o("single-choice-questions",{ref:"form",attrs:{question_type_id:t.question_type_id}})]:t._e(),"7iuhwq-tq4fwb"===t.question_type_id?[o("multiple-choice-questions",{ref:"form",attrs:{question_type_id:t.question_type_id}})]:t._e(),"f06o1o-j8hy1x"===t.question_type_id?[o("judgment-questions",{ref:"form",attrs:{question_type_id:t.question_type_id}})]:t._e()],2)}),l=[],u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"single-choice-questions"},[o("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-position":"top"}},[o("el-form-item",{attrs:{label:"题目"}},[o("mavon-editor",{attrs:{boxShadow:!1,subfield:!1,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,code:!0,table:!0,trash:!0}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),o("el-form-item",{attrs:{label:"选项"}},[o("question-options",{model:{value:t.optionsAndAnswer,callback:function(e){t.optionsAndAnswer=e},expression:"optionsAndAnswer"}})],1),o("el-form-item",{attrs:{label:"难度"}},[o("el-rate",{model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}})],1),o("el-form-item",{attrs:{label:"课程"}},[o("el-cascader",{attrs:{options:t.outline_options},model:{value:t.majors,callback:function(e){t.majors=e},expression:"majors"}})],1),o("el-form-item",{attrs:{label:"题目解析"}},[o("el-input",{model:{value:t.form.explanation,callback:function(e){t.$set(t.form,"explanation",e)},expression:"form.explanation"}})],1)],1),o("div",{staticClass:"preview"},[o("h2",[o("markdown-it-vue",{staticClass:"md-body",attrs:{content:t.form.content}})],1),o("div",{staticClass:"options"},[o("el-radio-group",{attrs:{disabled:""},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}},t._l(t.form.options,(function(e,n){return o("el-radio",{key:n,attrs:{value:e,label:e.value}},[t._v(t._s(e))])})),1)],1)])],1)},c=[],f={name:"single-choice-questions",props:{question_type_id:String},data:function(){return{outline_options:[],form:{question_type_id:this.question_type_id,difficulty:0,content:"",outline_id:"",majors_id:"",subject_id:"",options:[],answer:[],explanation:""}}},computed:{majors:{get:function(){return[this.form.majors_id,this.form.subject_id,this.form.outline_id]},set:function(t){console.log(t),this.form.majors_id=t[0],this.form.subject_id=t[1],this.form.outline_id=t[2]}},optionsAndAnswer:{get:function(){var t=this;return this.form.options.map((function(e,o){return{value:e,isAnswer:-1!==t.form.answer.indexOf(o)}}))},set:function(t){console.log(t);var e=[];this.form.options=t.map((function(t,o){return t.isAnswer&&e.push(o),t.value})),this.form.answer=e}}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.$api.educational.outline.list().then((function(e){t.outline_options=e.data}))},onSubmit:function(){var t=this;return new Promise((function(e,o){t.$refs.form.validate((function(n){n?(console.log(t.form),t.$api.educational.question.create(t.form).then((function(){e()})).catch((function(){o()}))):o()}))}))}}},d=f,m=(o("4af8"),o("2877")),p=Object(m["a"])(d,u,c,!1,null,"2740bbba",null),_=p.exports,h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"single-choice-questions"},[o("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-position":"top"}},[o("el-form-item",{attrs:{label:"题目"}},[o("mavon-editor",{attrs:{boxShadow:!1,subfield:!1,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,code:!0,table:!0,trash:!0}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),o("el-form-item",{attrs:{label:"选项"}},[o("question-options",{attrs:{type:"checkbox"},model:{value:t.optionsAndAnswer,callback:function(e){t.optionsAndAnswer=e},expression:"optionsAndAnswer"}})],1),o("el-form-item",{attrs:{label:"难度"}},[o("el-rate",{model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}})],1),o("el-form-item",{attrs:{label:"课程"}},[o("el-cascader",{attrs:{options:t.outline_options},model:{value:t.majors,callback:function(e){t.majors=e},expression:"majors"}})],1),o("el-form-item",{attrs:{label:"题目解析"}},[o("el-input",{model:{value:t.form.explanation,callback:function(e){t.$set(t.form,"explanation",e)},expression:"form.explanation"}})],1)],1),o("div",{staticClass:"preview"},[o("h2",[o("markdown-it-vue",{staticClass:"md-body",attrs:{content:t.form.content}})],1),o("div",{staticClass:"options"},[o("el-radio-group",{attrs:{disabled:""},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}},t._l(t.form.options,(function(e,n){return o("el-radio",{key:n,attrs:{value:e,label:e.value}},[t._v(t._s(e))])})),1)],1)])],1)},b=[],v={name:"single-choice-questions",props:{question_type_id:String},data:function(){return{outline_options:[],form:{question_type_id:this.question_type_id,difficulty:0,content:"",outline_id:"",majors_id:"",subject_id:"",options:[],answer:[],explanation:""}}},computed:{majors:{get:function(){return[this.form.majors_id,this.form.subject_id,this.form.outline_id]},set:function(t){console.log(t),this.form.majors_id=t[0],this.form.subject_id=t[1],this.form.outline_id=t[2]}},optionsAndAnswer:{get:function(){var t=this;return this.form.options.map((function(e,o){return{value:e,isAnswer:-1!==t.form.answer.indexOf(o)}}))},set:function(t){console.log(t);var e=[];this.form.options=t.map((function(t,o){return t.isAnswer&&e.push(o),t.value})),this.form.answer=e}}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.$api.educational.outline.list().then((function(e){t.outline_options=e.data}))},onSubmit:function(){var t=this;return new Promise((function(e,o){t.$refs.form.validate((function(n){n?(console.log(t.form),t.$api.educational.question.create(t.form).then((function(){e()})).catch((function(){o()}))):o()}))}))}}},w=v,y=(o("112c"),Object(m["a"])(w,h,b,!1,null,"7683825b",null)),x=y.exports,q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"single-choice-questions"},[o("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-position":"top"}},[o("el-form-item",{attrs:{label:"题目"}},[o("mavon-editor",{attrs:{boxShadow:!1,subfield:!1,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,quote:!0,ol:!0,ul:!0,link:!0,code:!0,table:!0,trash:!0}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),o("el-form-item",{attrs:{label:"选项"}},[o("question-options",{attrs:{nums:2,noAdd:""},model:{value:t.optionsAndAnswer,callback:function(e){t.optionsAndAnswer=e},expression:"optionsAndAnswer"}})],1),o("el-form-item",{attrs:{label:"难度"}},[o("el-rate",{model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}})],1),o("el-form-item",{attrs:{label:"课程"}},[o("el-cascader",{attrs:{options:t.outline_options},model:{value:t.majors,callback:function(e){t.majors=e},expression:"majors"}})],1),o("el-form-item",{attrs:{label:"题目解析"}},[o("el-input",{model:{value:t.form.explanation,callback:function(e){t.$set(t.form,"explanation",e)},expression:"form.explanation"}})],1)],1),o("div",{staticClass:"preview"},[o("h2",[o("markdown-it-vue",{staticClass:"md-body",attrs:{content:t.form.content}})],1),o("div",{staticClass:"options"},[o("el-radio-group",{attrs:{disabled:""},model:{value:t.form.answer,callback:function(e){t.$set(t.form,"answer",e)},expression:"form.answer"}},t._l(t.form.options,(function(e,n){return o("el-radio",{key:n,attrs:{value:e,label:e.value}},[t._v(t._s(e))])})),1)],1)])],1)},g=[],k={name:"single-choice-questions",props:{question_type_id:String},data:function(){return{outline_options:[],form:{question_type_id:this.question_type_id,difficulty:0,content:"",outline_id:"",majors_id:"",subject_id:"",options:[],answer:[],explanation:""}}},computed:{majors:{get:function(){return[this.form.majors_id,this.form.subject_id,this.form.outline_id]},set:function(t){console.log(t),this.form.majors_id=t[0],this.form.subject_id=t[1],this.form.outline_id=t[2]}},optionsAndAnswer:{get:function(){var t=this;return this.form.options.map((function(e,o){return{value:e,isAnswer:-1!==t.form.answer.indexOf(o)}}))},set:function(t){console.log(t);var e=[];this.form.options=t.map((function(t,o){return t.isAnswer&&e.push(o),t.value})),this.form.answer=e}}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.$api.educational.outline.list().then((function(e){t.outline_options=e.data}))},onSubmit:function(){var t=this;return new Promise((function(e,o){t.$refs.form.validate((function(n){n?(console.log(t.form),t.$api.educational.question.create(t.form).then((function(){e()})).catch((function(){o()}))):o()}))}))}}},j=k,$=(o("fd89"),Object(m["a"])(j,q,g,!1,null,"eb602a32",null)),A=$.exports,C={name:"create-drawer",props:{question_type_id:String},components:{SingleChoiceQuestions:_,MultipleChoiceQuestions:x,JudgmentQuestions:A},methods:{onSubmit:function(){return this.$refs.form.onSubmit()}}},S=C,D=Object(m["a"])(S,a,l,!1,null,"6793b622",null),O=D.exports,z={name:"questions",components:{CreateDrawer:O},data:function(){return{question_type_id:"",filters:{question_type_id:{type:"select",options:[],props:{placeholder:"题型"}},difficulty:{type:"select",options:[{label:"全部",value:""},{label:"简单",value:1},{label:"中等",value:2},{label:"困难",value:3}],props:{placeholder:"难度"}},outline_id:{type:"cascader",options:[],props:{placeholder:"课程"}}},column:[{name:"content",label:"题目",props:{width:680}},{name:"question_type_text",label:"题型",props:{width:80}},{name:"difficulty",label:"难易度",props:{width:180}},{name:"numUsed",label:"出题次数",width:680},{name:"action",label:"操作",props:{width:180}}],create_drawer_visible:!1,create_title:"",pagination:{page:1,page_size:10,total:0},tableData:[],questionTypes:[],majors:[]}},created:function(){this.fetchInitData()},methods:{fetchInitData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=[t.$api.educational.question.type(),t.$api.educational.question.majors(),t.$api.educational.outline.list()],Promise.all(o).then((function(e){console.log(e),t.filters.question_type_id.options=e[0].data.map((function(t){return{label:t.question_type_text,value:t.question_type_id}})),t.filters.outline_id.options=e[2].data,t.questionTypes=e[0].data,t.majors=e[1].data}));case 2:case"end":return e.stop()}}),e)})))()},fetchQuestionsList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e.$api.educational.question.list(Object(s["a"])(Object(s["a"])({},t),{},{outline_id:t.outline_id?t.outline_id[2]:""}));case 2:n=o.sent,e.tableData=n.data,e.pagination=n.pagination;case 5:case"end":return o.stop()}}),o)})))()},add_question_command:function(t){this.question_type_id=t.id,this.create_title="添加".concat(t.text),this.create_drawer_visible=!0},handlerCreate:function(){var t=this;this.$refs.createForm.onSubmit().then((function(){t.$refs.drawer.closeDrawer()}))}}},E=z,Q=(o("cef7"),Object(m["a"])(E,n,i,!1,null,"ff8202d2",null));e["default"]=Q.exports},ce8c:function(t,e,o){},cef7:function(t,e,o){"use strict";o("ce8c")},fd89:function(t,e,o){"use strict";o("1f39")}}]);
//# sourceMappingURL=chunk-78a98343.fe6921d3.js.map